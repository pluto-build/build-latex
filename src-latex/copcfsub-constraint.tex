\begin{figure}[t]
  \centering
  {
  \begin{gather*}      
  \inference[\rulename{T-Abs}]
        {\cojudge {e} {T_2} {C} {\reqs} &
         \typectxcolor{C_x} = \{\typecolor{T_1 \subtpe \ctxcolor{\reqs(x)}} \OR \textit{if}\ \ctxcolor{x \in \dom{\reqs}}\}}
        {\cojudge {\abs{x}{T_1}{e}} {T_1 \to T_2} {C \cup \typectxcolor{C_x}} {\reqs - x}}
\\[2ex]
      \inference[\rulename{T-App}]
        {\cojudge {e_1} {T_1} {C_1} {\reqs_1} &
         \cojudge {e_2} {T_2} {C_2} {\reqs_2} \\
         \fresh{U_{1}, U_{2}} & \ctxcolor{\reqmerge{\reqs_1}{\reqs_2} = \reqs|_{\typectxcolor{C}}}}
        {\cojudge {\app{e_1}{e_2}} {U_{2}} {C_1 \cup C_2 \cup \{T_1 = U_{1} \to U_{2}, \conssub{T_{2}}{U_{1}}\} \cup \typectxcolor{C}} {\reqs}}
\\[2ex]
      \inference[\rulename{T-If0}]
        {\cojudge {e_1} {T_1} {C_1} {\reqs_1} &
         \cojudge {e_2} {T_2} {C_2} {\reqs_2} &
         \cojudge {e_3} {T_3} {C_3} {\reqs_3} \\
         \ctxcolor{\reqmerge{\reqs_2}{\reqs_3} = \reqs_{2,3}|_{\typectxcolor{C_{2,3}}}} &
         \ctxcolor{\reqmerge{\reqs_1}{\reqs_{2,3}} = \reqs_{1,2,3}|_{\typectxcolor{C_{1,2,3}}}} &
         \fresh{U} \\
         \typecolor{C =  \{T_1 = \TNum, \consjoin{U}{T_{2}}{T_{3}} \} \cup C_1 \cup C_2 \cup C_3 \cup \typectxcolor{C_{2,3}} \cup \typectxcolor{C_{1,2,3}} }
         }
        {\cojudge {\ifzero{e_1}{e_2}{e_3}} {T_2} {C } {\reqs_{1,2,3}} }
\\[2ex]
  \inference[\rulename{T-Fix}]
        {\cojudge {e} {T} {C} {\reqs} &
         \fresh{U_{1}, U_{2}}}
        {\cojudge {\fix{e}} {U_{1}} {C \cup \{T = U_{1} \to U_{2}, \conssub{U_{2}}{U_{1}}\}} {\reqs}}
\end{gather*}
}
  \caption{Co-contextual type rules for PCF with subtyping.}
  \label{fig:co-pcf-sub}
\end{figure}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "document"
%%% End:
